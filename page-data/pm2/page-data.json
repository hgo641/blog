{"componentChunkName":"component---src-templates-post-jsx","path":"/pm2/","result":{"data":{"site":{"siteMetadata":{"title":"hongo"}},"markdownRemark":{"id":"f58bb59a-6a17-5889-a8ef-51796e6883ec","excerpt":"PM2란? 무중단 서버 실행 멀티스레딩 Daemon Process Manager 보통 Node.js 와 같이 사용되며 Node.js 어플리케이션을 쉽게 관리할 수 있게 해주는 Process Manager이다 Node.js 어플리케이션은 단일 CPU 코어에서 실행되기 때문에 CPU의 멀티코어 시스템은 사용할 수 없다 때문에 Node.js는 클러스터 모듈을 …","html":"<h2>PM2란?</h2>\n<ul>\n<li>무중단 서버 실행</li>\n<li>멀티스레딩</li>\n</ul>\n<p><strong>Daemon Process Manager</strong></p>\n<blockquote>\n<p>보통 Node.js 와 같이 사용되며 Node.js 어플리케이션을 쉽게 관리할 수 있게 해주는 Process Manager이다</p>\n<p>Node.js 어플리케이션은 단일 CPU 코어에서 실행되기 때문에 CPU의 멀티코어 시스템은 사용할 수 없다</p>\n<p>때문에 Node.js는 클러스터 모듈을 통해 단일 프로세스를 멀티 프로세스로 늘릴 수 있는 방법을 제공한다</p>\n<p>유저는 클러스터 모듈을 사용해 마스터 프로세스에서 워커 프로세스를 생성할 수 있다</p>\n<p>이를 도와주는 것이 PM2이며 PM2를 사용해 하이퍼 스레딩 및 무중단 서비스 제공이 가능해진다 </p>\n</blockquote>\n<p>PM2를 Django 프로젝트에서 사용해보자!</p>\n<h4>🔨 node 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"idl\"><pre class=\"language-idl\"><code class=\"language-idl\">$ sudo apt install nodejs</code></pre></div>\n<h4>🔨 npm 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"idl\"><pre class=\"language-idl\"><code class=\"language-idl\">$ sudo apt install npm\n# $ sudo npm install npm@latest -g</code></pre></div>\n<h4>🔨 pm2 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"idl\"><pre class=\"language-idl\"><code class=\"language-idl\">$ sudo npm install pm2 -g</code></pre></div>\n<h4>🔨 프로젝트 하위에 json 파일 생성 및 작성</h4>\n<div class=\"gatsby-highlight\" data-language=\"idl\"><pre class=\"language-idl\"><code class=\"language-idl\">$ vim pm2-appname.json</code></pre></div>\n<p># project/pm2-appname.json</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span> <span class=\"token property\">\"apps\"</span><span class=\"token operator\">:</span> \n \t<span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"djnago_with_pm2\"</span><span class=\"token punctuation\">,</span> \n         <span class=\"token property\">\"script\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"manage.py\"</span><span class=\"token punctuation\">,</span> \n         <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"runserver\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"0.0.0.0:8000\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n         <span class=\"token property\">\"exec_mode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fork\"</span><span class=\"token punctuation\">,</span> \n         <span class=\"token property\">\"exec_interpreter\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"python\"</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>args 에는 django 프로젝트를 배포할 때 쓰는 명령어 args를 넣는다</li>\n</ul>\n<h4>🔨 pm2 start</h4>\n<div class=\"gatsby-highlight\" data-language=\"idl\"><pre class=\"language-idl\"><code class=\"language-idl\">$ pm2 start pm2-appname.json</code></pre></div>\n<ul>\n<li>작성한 json파일을 실행</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/f8db4/pc2list.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 17.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQY0yWO226CQBRF/QZGZpDbAAoKyF1R2oRXUpM+9f+/ZfW0PqzMytlnds5OFS3ONODcb6h2RNXDm7ZHnSRLF5S94cR3VDqjLg0qv+L6Na4+45oS16vEC/bCzpYr4fVFkM34cSv0+LbDnj+J8i/xEVsskj+w+ZOw+cbPV6K0J643DsmNOBFvpKPc2IXHGVM90adB6NBFj/Fq+bjg/LzQtiXKJkzSER0ndPOBPo4EUYdfLXLpleDviIt49ZDCdMSrBryzUE7/HIKGoLqz31Y8KQpTyVJ5sxHTys6pf5cUMg9l14rLzFx6fgEflXLxIAsySAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='pc2list' title='pc2list' src='/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/ca1dc/pc2list.png' srcset='/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/e7570/pc2list.png 170w,\n/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/f46e7/pc2list.png 340w,\n/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/ca1dc/pc2list.png 680w,\n/hgo641/blog/static/ac77dcd81ef82316799ea86d0fdf4890/f8db4/pc2list.png 724w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<blockquote>\n<ul>\n<li>pm2 stop all : 모든 서버 중지</li>\n<li>pm2 stop {pid} : 해당 pid 서버 중지</li>\n</ul>\n</blockquote>","frontmatter":{"title":"django에서 pm2 사용하기","date":"May 16, 2022","update":"May 16, 2022","tags":["deploy"],"series":"종설"},"fields":{"slug":"/pm2/","readingTime":{"minutes":1.855}}},"seriesList":{"edges":[{"node":{"id":"445991a3-c7e5-5f30-aa17-c911ead116fd","fields":{"slug":"/media-S3/"},"frontmatter":{"title":"django media파일 S3서버랑 연동하기"}}},{"node":{"id":"100231f0-4961-5059-8668-1f8f59ef0da1","fields":{"slug":"/deploy-ec2/"},"frontmatter":{"title":"django 프로젝트 ec2로 배포하기"}}},{"node":{"id":"f58bb59a-6a17-5889-a8ef-51796e6883ec","fields":{"slug":"/pm2/"},"frontmatter":{"title":"django에서 pm2 사용하기"}}}]},"previous":{"fields":{"slug":"/zip/"},"frontmatter":{"title":"zip"}},"next":{"fields":{"slug":"/access-token/"},"frontmatter":{"title":"git access token 발급 잔디 테스트"}}},"pageContext":{"id":"f58bb59a-6a17-5889-a8ef-51796e6883ec","series":"종설","previousPostId":"8e10d9c5-ccdf-5fb1-9389-4a7d2618115c","nextPostId":"232934ea-695b-59c3-9933-f70434f65675"}},"staticQueryHashes":[]}