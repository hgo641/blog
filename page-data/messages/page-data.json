{"componentChunkName":"component---src-templates-post-jsx","path":"/messages/","result":{"data":{"site":{"siteMetadata":{"title":"hongo"}},"markdownRemark":{"id":"1f084815-ec52-5f58-a947-ec38e1f5a9f0","excerpt":"Messages Framework 현재 User를 위한 1회성 메시지를 담는 용도  인스턴스를 통해 메시지를 남긴다. ​ 즉, View에서만 사용 가능 메시지는 1회 노출되고 사라진다 View를 통한 템플릿 시스템을 통해 노출을 하면 템플릿 내에서 JS를 통한 노출도 가능 Message Levels를 통한 메시지 분류 파이썬 로깅 모듈의 Level을 차용…","html":"<h2>Messages Framework</h2>\n<hr>\n<p>현재 User를 위한 1회성 메시지를 담는 용도</p>\n<ul>\n<li><code class=\"language-text\">HttpRequest</code> 인스턴스를 통해 메시지를 남긴다.</li>\n</ul>\n<p>​ 즉, View에서만 사용 가능</p>\n<ul>\n<li>메시지는 1회 노출되고 사라진다</li>\n<li>View를 통한 템플릿 시스템을 통해 노출을 하면 템플릿 내에서 JS를 통한 노출도 가능</li>\n</ul>\n<h3>Message Levels를 통한 메시지 분류</h3>\n<hr>\n<p>파이썬 로깅 모듈의 Level을 차용</p>\n<p>레벨에 따라 로깅 여부 판단</p>\n<p>​ 혹은 템플릿에서 다른 스타일로 노출</p>\n<p><strong>레벨 종류</strong></p>\n<ul>\n<li>DEBUG : 디폴트 설정으로 무시되는 레벨, 개발 관련된 메세지이며, 실서비스에서는 무시</li>\n<li>INFO : 해당 유저에 대한 정보성 메세지</li>\n<li>SUCCESS : 액션이 성공적으로 수행되었음을 알림.</li>\n<li>WARNING : 실패가 아직 발생하진않았지만, 임박했다.</li>\n<li>ERROR : 액션이 수행되지 않았거나 다른 Failure가 발생했다.</li>\n</ul>\n<h3>Messages 등록</h3>\n<hr>\n<p># views.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> messages\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">post_new</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        post <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#messages.add_message(request, messages.SUCCESS, \"새 글이 등록되었습니다.\")</span>\n        message<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"새 글이 등록되었습니다.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Messages 소비</h3>\n<hr>\n<p><strong>messages context_processor를 통해 messages 목록에 접근</strong></p>\n<p>.tag 속성을 통해 레벨을 제공</p>\n<p>.message 속성을 통해 내용을 제공 (=str(message))\\</p>\n<p># template/post_new.html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% if messages %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>messages<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  {% for message in messages %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>[{{ message.tag }}] {{ message.message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {% endfor %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n{% endif %}</code></pre></div>\n<h3>Bootstrap4 스타일과 대응</h3>\n<hr>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/f31180cf29a501e3e4d64df83287e89d/b2dbf/bs.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 61.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACQElEQVQoz22Ry27TQBSG80asgQdgww6pK5CQWPAC7GCHWALqphLvgJAoglVTmnsg15LESR3f4tSJ7cZJnNhtEtv5OTMOTYoy0qczM+fMP+fXSQTRGpPrEP4ygnsTR28ZcmaL+Dyn6PgBRgSrHROGu8KAsOcB5SMsgzXYSpAeqoMlxFGAhrmC6ARoWitI45DfW14EYxbhgvJZ7QYtlqOavL5Ag/bF/gLaJP6ICzrzBVqXUwiGi0Z/gqrqcOqag4Y+RrM/pvwEAiFbM2hXc3RNl+cYNapjGmyt12skvpV7ePzuB54dnuDR2++4//qY+IqHb47x5OMpnh+l8fTwFAcfknhxlMLLTxkcvD/h+QdUe+/VF3wuKlwwjCIkbNtBJltGvlBFoVhDVzag9Syoug1dUKB3NKg9G6pmQlKG6BKyavKzSnWyOoQ787cdmiSYylWR//0HZ9kKmp0eZBKQ+iN0cmU0kzmI7KxZkHqMzV6L9yKJT2fXW8GBOUIyVSJ+oVBqUYGFtjTABcXzQh2V4jna8hAdaQ90L3QNjKe7HVpxh2fZEtJ5skxCIrNGvwvUdY1EBcnY3Jt3oe6Y6MTdEbTIMhMqlBqoNyV6aPLHCgnmKy0Ua23qxiCL9m3uH8z2hcIs7wgOqcNkuoyfmTJZHXK7QnfALdWbCgTR2FgboP0/VNsSmWXvbocpmnKaBsCsKvoVH4pCU9YuRzyy8z5YjnXp7g4lCAJ4ng/P97EKQoRhhCAMCYpBuN2H4R7i+yha3wr+BUL6ZJL7Yvr/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='bs' title='bs' src='/static/f31180cf29a501e3e4d64df83287e89d/ca1dc/bs.png' srcset='/static/f31180cf29a501e3e4d64df83287e89d/e7570/bs.png 170w,\n/static/f31180cf29a501e3e4d64df83287e89d/f46e7/bs.png 340w,\n/static/f31180cf29a501e3e4d64df83287e89d/ca1dc/bs.png 680w,\n/static/f31180cf29a501e3e4d64df83287e89d/b2dbf/bs.png 946w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>부트스트랩4와 바로 대응 시키려면 <strong>messages tag</strong>를 변경하면된다!</p>\n<h4>messages tags 변경하기</h4>\n<hr>\n<p># settings.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> djangp<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>messages <span class=\"token keyword\">import</span> constants <span class=\"token keyword\">as</span> messages_constants\n\nMESSAGE_TAGS <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    messages_constants<span class=\"token punctuation\">.</span>DEBUG <span class=\"token punctuation\">:</span> <span class=\"token string\">'secondary'</span><span class=\"token punctuation\">,</span>\n    messages_constants<span class=\"token punctuation\">.</span>ERROR <span class=\"token punctuation\">:</span> <span class=\"token string\">'danger'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p># html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% if messages %} {% for message in messages %}\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert alert-{{ message. tag }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ message.message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n{% endfor%} {% endif %}</code></pre></div>","frontmatter":{"title":"Django의 Messages Framework","date":"April 13, 2022","update":null,"tags":["django","askcompany"],"series":"askcompany"},"fields":{"slug":"/messages/","readingTime":{"minutes":2.25}}},"seriesList":{"edges":[{"node":{"id":"8c418e59-f9a5-5fdb-8f42-e3dff2ff08a9","fields":{"slug":"/django-ORM/"},"frontmatter":{"title":"django ORM"}}},{"node":{"id":"3fab5510-8f86-511d-b0a7-6031ea7f95f8","fields":{"slug":"/rest/"},"frontmatter":{"title":"REST"}}},{"node":{"id":"e41b821c-ba53-5e84-a1ae-c7c4cba634b5","fields":{"slug":"/static-media/"},"frontmatter":{"title":"django의 Static & Media 파일"}}},{"node":{"id":"32500d0b-16dd-5e7c-a16c-b45dd8cf9f0c","fields":{"slug":"/django-admin/"},"frontmatter":{"title":"django ORM"}}},{"node":{"id":"c52011a6-a94e-5aa8-9612-9c3a352654e9","fields":{"slug":"/json/"},"frontmatter":{"title":"작성중 : json 응답뷰 만들기"}}},{"node":{"id":"97fa8fe6-4603-5a9f-b2f0-c32be0c80118","fields":{"slug":"/view-decorators/"},"frontmatter":{"title":"decorator를 사용해서 Django view 꾸며보기"}}},{"node":{"id":"125af04d-f31e-5dd0-8176-39fec9d54510","fields":{"slug":"/CBV-api/"},"frontmatter":{"title":"CBV api 사용해보기"}}},{"node":{"id":"34e238b9-dd92-5457-846a-8b6d13e76798","fields":{"slug":"/queryset/"},"frontmatter":{"title":"작성중 : 쓸만해보이는 쿼리셋팁"}}},{"node":{"id":"cdf383e6-f2a6-5939-8887-e7501d318084","fields":{"slug":"/http-status-code/"},"frontmatter":{"title":"HTTP 상태 코드"}}},{"node":{"id":"8f38a40f-0d0e-5e23-9922-b0286f3b8a2b","fields":{"slug":"/get-absolute-url/"},"frontmatter":{"title":"detail url을 간단하게 하고싶다면, get_absolute_url"}}},{"node":{"id":"9ea22a57-02a3-5785-af73-eaabf2a736b4","fields":{"slug":"/httprequest-httpresponse/"},"frontmatter":{"title":"HTTPRequest와 HttpResponse"}}},{"node":{"id":"e3bfa53a-3d48-554e-beb7-4648630c16d0","fields":{"slug":"/form-modelform/"},"frontmatter":{"title":"Django의 Form과 ModelForm"}}},{"node":{"id":"6fb810bb-d784-5bde-8528-947db9b3fd9f","fields":{"slug":"/clean-validators/"},"frontmatter":{"title":"장고 폼의 유효성 검사 : clean과 validators"}}},{"node":{"id":"1f084815-ec52-5f58-a947-ec38e1f5a9f0","fields":{"slug":"/messages/"},"frontmatter":{"title":"Django의 Messages Framework"}}},{"node":{"id":"24b75555-99e9-5cf5-b345-7f02926c7b6d","fields":{"slug":"/CBV-api2/"},"frontmatter":{"title":"CBV api 사용해보기2 : crud"}}},{"node":{"id":"c2a4c8ba-644c-5a2e-a5fb-fefc3d400a11","fields":{"slug":"/serializer/"},"frontmatter":{"title":"REST"}}},{"node":{"id":"71a681c8-2fc0-5652-ba2c-5ad25267c318","fields":{"slug":"/LoginView/"},"frontmatter":{"title":"Django LoginView 사용"}}}]},"previous":{"fields":{"slug":"/clean-validators/"},"frontmatter":{"title":"장고 폼의 유효성 검사 : clean과 validators"}},"next":{"fields":{"slug":"/CBV-api2/"},"frontmatter":{"title":"CBV api 사용해보기2 : crud"}}},"pageContext":{"id":"1f084815-ec52-5f58-a947-ec38e1f5a9f0","series":"askcompany","previousPostId":"6fb810bb-d784-5bde-8528-947db9b3fd9f","nextPostId":"24b75555-99e9-5cf5-b345-7f02926c7b6d"}},"staticQueryHashes":[]}