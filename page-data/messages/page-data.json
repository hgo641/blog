{"componentChunkName":"component---src-templates-post-jsx","path":"/messages/","result":{"data":{"site":{"siteMetadata":{"title":"hongo"}},"markdownRemark":{"id":"dfa69f72-f805-5b2f-b10c-27700449ef51","excerpt":"Messages Framework 현재 User를 위한 1회성 메시지를 담는 용도  인스턴스를 통해 메시지를 남긴다. ​ 즉, View에서만 사용 가능 메시지는 1회 노출되고 사라진다 View를 통한 템플릿 시스템을 통해 노출을 하면 템플릿 내에서 JS를 통한 노출도 가능 Message Levels를 통한 메시지 분류 파이썬 로깅 모듈의 Level을 차용…","html":"<h2>Messages Framework</h2>\n<hr>\n<p>현재 User를 위한 1회성 메시지를 담는 용도</p>\n<ul>\n<li><code class=\"language-text\">HttpRequest</code> 인스턴스를 통해 메시지를 남긴다.</li>\n</ul>\n<p>​ 즉, View에서만 사용 가능</p>\n<ul>\n<li>메시지는 1회 노출되고 사라진다</li>\n<li>View를 통한 템플릿 시스템을 통해 노출을 하면 템플릿 내에서 JS를 통한 노출도 가능</li>\n</ul>\n<h3>Message Levels를 통한 메시지 분류</h3>\n<hr>\n<p>파이썬 로깅 모듈의 Level을 차용</p>\n<p>레벨에 따라 로깅 여부 판단</p>\n<p>​ 혹은 템플릿에서 다른 스타일로 노출</p>\n<p><strong>레벨 종류</strong></p>\n<ul>\n<li>DEBUG : 디폴트 설정으로 무시되는 레벨, 개발 관련된 메세지이며, 실서비스에서는 무시</li>\n<li>INFO : 해당 유저에 대한 정보성 메세지</li>\n<li>SUCCESS : 액션이 성공적으로 수행되었음을 알림.</li>\n<li>WARNING : 실패가 아직 발생하진않았지만, 임박했다.</li>\n<li>ERROR : 액션이 수행되지 않았거나 다른 Failure가 발생했다.</li>\n</ul>\n<h3>Messages 등록</h3>\n<hr>\n<p># views.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> messages\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">post_new</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">if</span> form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        post <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#messages.add_message(request, messages.SUCCESS, \"새 글이 등록되었습니다.\")</span>\n        message<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">\"새 글이 등록되었습니다.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Messages 소비</h3>\n<hr>\n<p><strong>messages context_processor를 통해 messages 목록에 접근</strong></p>\n<p>.tag 속성을 통해 레벨을 제공</p>\n<p>.message 속성을 통해 내용을 제공 (=str(message))\\</p>\n<p># template/post_new.html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% if messages %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>messages<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  {% for message in messages %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>[{{ message.tag }}] {{ message.message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {% endfor %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n{% endif %}</code></pre></div>\n<h3>Bootstrap4 스타일과 대응</h3>\n<hr>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/b2dbf/bs.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 61.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACQElEQVQoz22Ry27TQBSG80asgQdgww6pK5CQWPAC7GCHWALqphLvgJAoglVTmnsg15LESR3f4tSJ7cZJnNhtEtv5OTMOTYoy0qczM+fMP+fXSQTRGpPrEP4ygnsTR28ZcmaL+Dyn6PgBRgSrHROGu8KAsOcB5SMsgzXYSpAeqoMlxFGAhrmC6ARoWitI45DfW14EYxbhgvJZ7QYtlqOavL5Ag/bF/gLaJP6ICzrzBVqXUwiGi0Z/gqrqcOqag4Y+RrM/pvwEAiFbM2hXc3RNl+cYNapjGmyt12skvpV7ePzuB54dnuDR2++4//qY+IqHb47x5OMpnh+l8fTwFAcfknhxlMLLTxkcvD/h+QdUe+/VF3wuKlwwjCIkbNtBJltGvlBFoVhDVzag9Syoug1dUKB3NKg9G6pmQlKG6BKyavKzSnWyOoQ787cdmiSYylWR//0HZ9kKmp0eZBKQ+iN0cmU0kzmI7KxZkHqMzV6L9yKJT2fXW8GBOUIyVSJ+oVBqUYGFtjTABcXzQh2V4jna8hAdaQ90L3QNjKe7HVpxh2fZEtJ5skxCIrNGvwvUdY1EBcnY3Jt3oe6Y6MTdEbTIMhMqlBqoNyV6aPLHCgnmKy0Ua23qxiCL9m3uH8z2hcIs7wgOqcNkuoyfmTJZHXK7QnfALdWbCgTR2FgboP0/VNsSmWXvbocpmnKaBsCsKvoVH4pCU9YuRzyy8z5YjnXp7g4lCAJ4ng/P97EKQoRhhCAMCYpBuN2H4R7i+yha3wr+BUL6ZJL7Yvr/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='bs' title='bs' src='/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/ca1dc/bs.png' srcset='/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/e7570/bs.png 170w,\n/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/f46e7/bs.png 340w,\n/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/ca1dc/bs.png 680w,\n/hgo641/blog/static/f31180cf29a501e3e4d64df83287e89d/b2dbf/bs.png 946w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>부트스트랩4와 바로 대응 시키려면 <strong>messages tag</strong>를 변경하면된다!</p>\n<h4>messages tags 변경하기</h4>\n<hr>\n<p># settings.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> djangp<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>messages <span class=\"token keyword\">import</span> constants <span class=\"token keyword\">as</span> messages_constants\n\nMESSAGE_TAGS <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    messages_constants<span class=\"token punctuation\">.</span>DEBUG <span class=\"token punctuation\">:</span> <span class=\"token string\">'secondary'</span><span class=\"token punctuation\">,</span>\n    messages_constants<span class=\"token punctuation\">.</span>ERROR <span class=\"token punctuation\">:</span> <span class=\"token string\">'danger'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p># html</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% if messages %} {% for message in messages %}\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert alert-{{ message. tag }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ message.message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n{% endfor%} {% endif %}</code></pre></div>","frontmatter":{"title":"Django의 Messages Framework","date":"April 13, 2022","update":null,"tags":["django","askcompany"],"series":"askcompany"},"fields":{"slug":"/messages/","readingTime":{"minutes":2.25}}},"seriesList":{"edges":[{"node":{"id":"8fefea4f-9b6f-57a4-a7e4-5aedf423b925","fields":{"slug":"/django-ORM/"},"frontmatter":{"title":"django ORM"}}},{"node":{"id":"86119087-6333-5ffe-a5f6-f42ab50e217e","fields":{"slug":"/rest/"},"frontmatter":{"title":"REST"}}},{"node":{"id":"78b9f4e7-a2e2-51b5-894c-6d78a96fb311","fields":{"slug":"/django-admin/"},"frontmatter":{"title":"django ORM"}}},{"node":{"id":"f82631d3-2495-5141-9090-480ac221f298","fields":{"slug":"/static-media/"},"frontmatter":{"title":"django의 Static & Media 파일"}}},{"node":{"id":"3632237d-c865-57f5-84d3-42504c3efe06","fields":{"slug":"/json/"},"frontmatter":{"title":"작성중 : json 응답뷰 만들기"}}},{"node":{"id":"54c123f3-caed-5153-832f-931f477f7c6c","fields":{"slug":"/get-absolute-url/"},"frontmatter":{"title":"detail url을 간단하게 하고싶다면, get_absolute_url"}}},{"node":{"id":"bb14e873-7ffb-5e44-adaf-418bc7557714","fields":{"slug":"/http-status-code/"},"frontmatter":{"title":"HTTP 상태 코드"}}},{"node":{"id":"619670e5-53bd-549d-ae35-4f7bfc46d7b4","fields":{"slug":"/queryset/"},"frontmatter":{"title":"작성중 : 쓸만해보이는 쿼리셋팁"}}},{"node":{"id":"bf47726e-6688-5b10-9994-37de18c463c8","fields":{"slug":"/CBV-api/"},"frontmatter":{"title":"CBV api 사용해보기"}}},{"node":{"id":"23091801-a214-5f20-98df-ea82cba424a3","fields":{"slug":"/view-decorators/"},"frontmatter":{"title":"decorator를 사용해서 Django view 꾸며보기"}}},{"node":{"id":"cf0a3ceb-264d-527d-a369-8477a225e7cb","fields":{"slug":"/httprequest-httpresponse/"},"frontmatter":{"title":"HTTPRequest와 HttpResponse"}}},{"node":{"id":"47c287be-bd57-553c-809d-6e0b429f2434","fields":{"slug":"/clean-validators/"},"frontmatter":{"title":"장고 폼의 유효성 검사 : clean과 validators"}}},{"node":{"id":"8b966cb7-047c-5f95-ab4c-d581964cfaa0","fields":{"slug":"/form-modelform/"},"frontmatter":{"title":"Django의 Form과 ModelForm"}}},{"node":{"id":"705c8614-423d-5587-87fb-b8c8b39fb2f6","fields":{"slug":"/CBV-api2/"},"frontmatter":{"title":"CBV api 사용해보기2 : crud"}}},{"node":{"id":"dfa69f72-f805-5b2f-b10c-27700449ef51","fields":{"slug":"/messages/"},"frontmatter":{"title":"Django의 Messages Framework"}}},{"node":{"id":"7c003db0-96e2-515f-9554-4034c9b44f25","fields":{"slug":"/serializer/"},"frontmatter":{"title":"REST"}}},{"node":{"id":"33b29129-f5ac-57b7-b66e-814169eebcbc","fields":{"slug":"/LoginView/"},"frontmatter":{"title":"Django LoginView 사용"}}}]},"previous":{"fields":{"slug":"/CBV-api2/"},"frontmatter":{"title":"CBV api 사용해보기2 : crud"}},"next":{"fields":{"slug":"/datamining/"},"frontmatter":{"title":"작성중"}}},"pageContext":{"id":"dfa69f72-f805-5b2f-b10c-27700449ef51","series":"askcompany","previousPostId":"705c8614-423d-5587-87fb-b8c8b39fb2f6","nextPostId":"35cb486b-c0aa-5492-bf01-368334b4e4d5"}},"staticQueryHashes":[]}