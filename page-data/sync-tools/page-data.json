{"componentChunkName":"component---src-templates-post-jsx","path":"/sync-tools/","result":{"data":{"site":{"siteMetadata":{"title":"hongo"}},"markdownRemark":{"id":"a1a1c386-4e12-55c0-b88e-b1ab29cfc979","excerpt":"이전 내용 요약 Critical Section with Disable/Enable interrupt 인터럽트로 인해 다른 프로세스가 참견불가능 싱글 cpu일 경우 해결 가능 그러나 너무 강력한 방법 크리티컬 섹션하자고 모든 인터럽트를 다 막는다? 하드웨어 인스트럭션 : testandset 크리티컬 섹션 문제 해결 가능 Mutex Lock 이전에 배운 te…","html":"<blockquote>\n<p>이전 내용 요약</p>\n<ul>\n<li>\n<p>Critical Section with Disable/Enable interrupt</p>\n<ul>\n<li>인터럽트로 인해 다른 프로세스가 참견불가능</li>\n<li>싱글 cpu일 경우 해결 가능</li>\n<li>그러나 너무 강력한 방법</li>\n<li>크리티컬 섹션하자고 모든 인터럽트를 다 막는다?</li>\n</ul>\n</li>\n<li>\n<p>하드웨어 인스트럭션 : test<em>and</em>set</p>\n<ul>\n<li>크리티컬 섹션 문제 해결 가능</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2>Mutex Lock</h2>\n<blockquote>\n<p>이전에 배운 test<em>and</em>set같은 하드웨어 instruction의 경우 불편한 점이 있다!</p>\n<ul>\n<li>개발자마다 다 다르게 개발할텐데... 어떻게 구현할지 다 지맘대로</li>\n</ul>\n<p>그래서 api수준의 해결방법을 만들자! 해서 생긴게 mutex, semaphore, monitor들</p>\n</blockquote>\n<ul>\n<li>race condition - 리소스를 공유하면서 생길 수 있는 문제 상황 그 자체</li>\n<li>critical section - 문제 정의 : 레이스 컨디션을 발생시킬수있는 코드를 정의</li>\n<li>mutex, semaphore, monitor - 해결방법 (high-level) API 수준임 - OS가 제공해줘야함</li>\n<li><strong>Mutex (Mutual Exclusion) : 공유 변수 + 공유 자원(HW자원, I/O device ) - 변수를 넘어 자원까지 확장됨</strong></li>\n</ul>\n<p>​\t</p>\n<blockquote>\n<p>ex)</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/f26098515630b92caf8316c3e47733b8/0f9e1/mutex-example-image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 65.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2klEQVQ4y4VTyYpiQRCs7/Dgxf8RBH9mGqfB6V8QT4JLX0RR8KogCAquKG548eC+7/sa05FQTjd0jwnBy/cqKzIzMp/qdrsYjUYYDofo9/sC+vz2P4zHY0wmkwd6vR6WyyVUp9MB7Xw+P3C73fDMDocDFosFVqsVLpeLgIkUKyQBD67Xqxys1+unpJvN5hHDu8fjUapWLJVVMaBSqaDRaGC/36NaraJYLAoKhYKAfqlUEj+XyyGTyci32WwmFQshK6TN53NEIhEkk0nsdjtJQnM6nTAYDLBarZKItt1uEYvF4PP5EA6Hkc1m/xG2222pjoTUhKC4bON+v8Nut0MpBZPJJBqRjOf0p9OpkOgBsVJFZpIxiCB5vV5HOp3G/aOa19ffQmg0GjEYDERfJuWTSTV4l5qq7wSnNh6PR/xQKASz2QybzSZDe2aKbWnoC29vf2CxWOSdbWjtaIz76Umoz4F6Dd7ffXh5+SU+NdbL22w2RUNuwul0kk3gHU5ec3xpWROWy2WZ4vZDz1arJTsWjUYRDAZlXbxer8S4XC7R2+FwiKbS8k+t6PWg4LREIiFrRX0DgYAQ+v1+1Go1uN1uGdQXwu/0+GysNJ/Py79OUhKkUinZing8/tjbv97htutC0WwhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='mutex example image' title='mutex example image' src='/blog/static/f26098515630b92caf8316c3e47733b8/ca1dc/mutex-example-image.png' srcset='/blog/static/f26098515630b92caf8316c3e47733b8/e7570/mutex-example-image.png 170w,\n/blog/static/f26098515630b92caf8316c3e47733b8/f46e7/mutex-example-image.png 340w,\n/blog/static/f26098515630b92caf8316c3e47733b8/ca1dc/mutex-example-image.png 680w,\n/blog/static/f26098515630b92caf8316c3e47733b8/0f9e1/mutex-example-image.png 867w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>하나의 프린터를 여러 사람들이 공유해서 쓴다면 출력되는 내용이 섞일 것. 프린터룸을 \"key\"를 가진 사람만 접근 가능하게 해서 해결하자!</p>\n<ul>\n<li>프린터룸 : critical section (프린터기를 공유하면서 문제가 생길 수 있는 공간)</li>\n<li>프린터기 : 공유 자원</li>\n<li>admin : =os, key(mutex)를 관리한다</li>\n<li>각각의 사람들 : process or thread</li>\n<li>key : mutex</li>\n</ul>\n</blockquote>\n<p>os는 mutex권한을 acquire하거나 realease함</p>\n<ul>\n<li>mutex로 Critical section을 보호하는 방법</li>\n<li>acquire()과 release()를 사용해서 섹션에 진입하는 것을 제어한다. (인터페이스 제공)</li>\n<li>Boolean variable == mutex == key </li>\n</ul>\n<h3>acquire() - key를 전달</h3>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/bd160fa170d1ae0d8e323867def92589/af1d1/mutex-acquire.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 27.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAu0lEQVQY021QiwqDMAzs/3+hDkRlIhUUH2i1j5j1slXcWCBtk0tyl6p937ksSy6KgsdxZGstH8fByDvn+DxPhiFe11VqpmkS7NdQq3AA7DrNfd+Lo6ltW16W5SqEGWO4aZ7Rm4t824zkE7kiChyIJKB439nSoPvAuq45zx9RQCeK4SDGBuhXeFRVxVmWsdZamrz3kXn7IkBunmcZMAyDbILe9EXWuvdAHBQVAEABwBD8xXhXS59NkuJ/9gJsIYTbiUfpLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='mutex acquire' title='mutex acquire' src='/blog/static/bd160fa170d1ae0d8e323867def92589/ca1dc/mutex-acquire.png' srcset='/blog/static/bd160fa170d1ae0d8e323867def92589/e7570/mutex-acquire.png 170w,\n/blog/static/bd160fa170d1ae0d8e323867def92589/f46e7/mutex-acquire.png 340w,\n/blog/static/bd160fa170d1ae0d8e323867def92589/ca1dc/mutex-acquire.png 680w,\n/blog/static/bd160fa170d1ae0d8e323867def92589/af1d1/mutex-acquire.png 919w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>admin이 수행</li>\n<li>key가 없으면 대기 - 계속 while문 돌면서 누군가 key를 release() 할 때까지 기다림</li>\n<li>key가 생기면 acquire()이후의 코드를 실행 (크리티컬 섹션으로 진입)</li>\n</ul>\n<h3>release() - key를 반납</h3>\n<ul>\n<li>할 일이 끝났으니 available을 true로 만듦</li>\n</ul>\n<h3>Busy waiting</h3>\n<blockquote>\n<p> key를 얻기전에 while문을 계속 도는 것</p>\n</blockquote>\n<ul>\n<li>available이 참인지 거짓인지 계속 판단</li>\n<li>while을 깨줄 수 있는건 외부의 다른 프로세스가 realease를 해주는 것 뿐</li>\n<li>\n<p>만약 프로세스 P0이 waiting상태라면,</p>\n<ul>\n<li>P0 : time slice를 소진할 때 까지 busy waiting</li>\n<li>availble을 참으로 바꿔주는 건 다른 프로세스 : 다른 프로세스가 cpu에 올라가서 참으로 만들어줘야하나 이미 P0이 cpu 선점</li>\n<li>P0은 계속 while문을 돌리면서 cpu에 있어야함</li>\n<li>성능 손해</li>\n</ul>\n</li>\n<li>이걸 spinlock이라함 == (lock을 위해서 계속 spin중이다.)</li>\n</ul>\n<h2>Semaphore</h2>\n<blockquote>\n<p>mutex와 비슷하나 좀 더 진화된 형태</p>\n</blockquote>\n<p>key가 여러개!!!</p>\n<ul>\n<li>P() : wait(), (=acquire)</li>\n<li>V() : signal(), (= release)</li>\n<li>\n<p>S : int, key가 몇 개인지 개수를 나타냄</p>\n<ul>\n<li>0보다 큰 int (S가 1이면 mutex와 같은 기능. mutex에서는 0과 1뿐인 boolean 사용했음)</li>\n</ul>\n</li>\n</ul>\n<h4>📌 Binary semaphore</h4>\n<ul>\n<li>\n<p>S가 0또는 1 (mutex와 같은 기능)</p>\n<ul>\n<li>for 전통적인 공유 변수 제어</li>\n</ul>\n</li>\n</ul>\n<h4>📌 Counting Semaphore</h4>\n<ul>\n<li>S가 2보다 크거나 같음</li>\n<li>for   공동의 리소스 자원 관리/제어</li>\n<li>wait()과 signal() 사용 - <strong>스케줄링 필요</strong> : 단순히 공유 자원의 lock개념을 넘어 확장됨(동기화)</li>\n</ul>\n<p><br/><br/></p>\n<h3>Implementation</h3>\n<ul>\n<li>\n<p>wait()과 signail()(P, V)을 수행하는 것도 크리티컬 섹션에 포함시켜야한다 - 특히 S값을 바꾸는 과정</p>\n<ul>\n<li>S는 공유 자원이므로 S의 값을 변화시키는 wait()와 signal()도 크리티컬 섹션에 포함시켜야함</li>\n</ul>\n</li>\n<li>전통적인 방법으로 크리티컬 섹션 문제를 푸는 것은 busywaiting 발생</li>\n</ul>\n<h3>그렇다면, busy waiting을 어떻게 해결해야할까?</h3>\n<h4>semaphore waiting queue</h4>\n<p>busywaiting해결을 위해 세마포어 전용 waiting queue를 만든다</p>\n<p>각 세마포어에는 waiting queue가 할당된다.</p>\n<p>세마포어 waiting queue의 entry에는 아래 두 개가 존재한다.</p>\n<ul>\n<li>value(int)</li>\n<li>다음 순서를 가리키는 포인터</li>\n</ul>\n<blockquote>\n<p>busywaiting 하지말고 그냥 잠들어있어라</p>\n<p>잠든 애들은 웨이팅 큐에 넣어서 os가 관리</p>\n<p>주의! cpu의 waiting queue와 다른 것임</p>\n<p>세마포어 전용 waiting queue를 의미</p>\n</blockquote>\n<br/>\n<p>block과 wakeup 두 동작을 수행한다.</p>\n<h4>📌 block &#x26; wakeup</h4>\n<ul>\n<li>block == sleep : wait을 호출한 프로세스를 적절한 waiting queue에 넣는다</li>\n<li>wakeup : waiting queue에 있는 애를 제거하고 cpu의 ready queue에 넣는다</li>\n</ul>\n<h4>📌 wait</h4>\n<p>​\t<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 508px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/1245fba13eb60e6599679d0a2d8bd4a1/7c891/sem-wait.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 47.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABH0lEQVQoz5VSyW6DQAzl/z8q9NYglV6aEyeQUsoAw74v82o7ApEqqVpLxuPBfn62xwLJOI5omgZ936PrOrRti5Z8tnw3zzN0lkncuhoYYyhrs/di8cfzPLyez/i8XuE4Dl5sG/bphDf3Ha7rIiewj8sFaZIQ+IIb3g3wqAK4HZqmRlEUSCgpjmMkpMyaWR3FPAA66g5Y5LkAlGWJKPpCRqyUiukcYRgGGkUvBdd1kRE8E+uI3nUtfN9HVVVI01TAmDEXiCKFIAioYIVMZ1KYC2itEStFcSkG6sba2mCp6wphGBIzJYGaEpkdK7e+LWiaJrHLsuw+/2d/b1kuKZE3y61LmwTwaJO/iTBk5J/D/88i7pbCCcxmY2KePIe/Mv0Gw5i8gjj9RcYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='sem wait' title='sem wait' src='/blog/static/1245fba13eb60e6599679d0a2d8bd4a1/7c891/sem-wait.png' srcset='/blog/static/1245fba13eb60e6599679d0a2d8bd4a1/e7570/sem-wait.png 170w,\n/blog/static/1245fba13eb60e6599679d0a2d8bd4a1/f46e7/sem-wait.png 340w,\n/blog/static/1245fba13eb60e6599679d0a2d8bd4a1/7c891/sem-wait.png 508w' sizes='(max-width: 508px) 100vw, 508px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>​\t<br/></p>\n<p>​\t# interrupt 제어 추가버전</p>\n<p>​\t<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 487px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/80e9b6d865918ee5a69fe4fd67e29529/6a170/sem-wait-adv.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 77.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6klEQVQ4y5VUyY7bMAzN/39T0E57SXKaAXJre4x3ed9kLX5D0vbUTZMOSoCgLNmPj3yUD9Ya9H2PcRyhtUbXdfLMcRgG2bfWoq5rGIree8zzDLEt7uxQ5Aqn8xnX6xW/fv7Al68v+P7tBcfjEa+vb7hcLijLAqfTGWmaYZqMgC5482/wDVAOyFVtULYWaUVseo9eezS9k/2qsyg7h6zStDboBvsB9BDQGAOV58SkRBDGUCpHFKfoqWStJ3nROQ+/futXZo9cAL1zCMOQypkQ3G7IqQ1pkqAscqSZkoSGztqmwWS4ZIdndpjX5i5idAiCQOKNgFWWIUlSFEUhoiiVSRxINE7OIg5SxSKm1iMB7noQxwluQUiAgwA1xKgigJjYZsQ0jmOJTdMKMJ9vyaIoQlVVDLjI4qlBNYmQt07EqWg9kDCqWUSpukWgorHoRofJzk9KXhnyKMRxJKUG1E9mwxk3ATih8/6fgnyIwgtjNjWdDDIL4ZyV2d3P2/36L4YCQgDci7YlFSeNeR3cz+w5ILHKc569BKqoaf4mWLeUqI2nK+dpXJaojZPo/ZPB3m80g18bP4nzjcgbvkETuZGbsu1zoqc3hQXhH8K9+Xn+/5J5QFmAfcMXx4O9P/0hQ2a3/3vss99/9JnCbO/xFeEiAsW/kwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='sem wait adv' title='sem wait adv' src='/blog/static/80e9b6d865918ee5a69fe4fd67e29529/6a170/sem-wait-adv.png' srcset='/blog/static/80e9b6d865918ee5a69fe4fd67e29529/e7570/sem-wait-adv.png 170w,\n/blog/static/80e9b6d865918ee5a69fe4fd67e29529/f46e7/sem-wait-adv.png 340w,\n/blog/static/80e9b6d865918ee5a69fe4fd67e29529/6a170/sem-wait-adv.png 487w' sizes='(max-width: 487px) 100vw, 487px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>wait - value가 0보다 작으면 키가 없는것!</li>\n<li>키가 없으니 리스트(웨이팅 큐)에 넣는다</li>\n<li>block() == sleap</li>\n</ul>\n<h4>📌 signal</h4>\n<p>​\t<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 556px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/f51bfe3e62dc4e852b061a9459677776/68b51/sem-signal.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEUlEQVQoz51Ry26DMBD0/38UBw7NJX2EQyOlN0JMbJ7GvGIeU69VIpQGVepKg5eVPTuzy7TWaJoGSilQXtc1yrJEVVWu3nUdpJQwxmCaJszz7LAV7HW/x8tuh8/jER/vb/B9H57nIQgCHA4BhBD4Op2gbaNhGO6EW2B0iZTleY40SZBlmVWn0N8M/hPMmBuKonBILGFuCYW44iqkta6cfao3TY22bZ3tcRzv5zp3CukzjgOiKAK/XJxSml+appCWiCzHcQz1U9O6Bufc5dSMZk+uuL1DM2ckk1SG4RnnMHSPCURExLPtviyDgs7pobb+ZyS173s38AWLDcI6nm33scYW71vx11Z/bXlt5Rm2lG3FN9g2u+p1RJ5NAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='sem signal' title='sem signal' src='/blog/static/f51bfe3e62dc4e852b061a9459677776/68b51/sem-signal.png' srcset='/blog/static/f51bfe3e62dc4e852b061a9459677776/e7570/sem-signal.png 170w,\n/blog/static/f51bfe3e62dc4e852b061a9459677776/f46e7/sem-signal.png 340w,\n/blog/static/f51bfe3e62dc4e852b061a9459677776/68b51/sem-signal.png 556w' sizes='(max-width: 556px) 100vw, 556px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>​\t<br/></p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 568px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/blog/static/483561fb59880a35d565ae3f7f2d6f3f/d63a8/sem-signal-adv.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABj0lEQVQ4y42S63KjMAyF8/5PtzOd3V6mJdMkDWADNhjjO2dlN2l/tE3RjJB8+5CPtXPO4XQ64Xg4gLEW9fkNVfWC/X6P0/GAruvA2qaspZSwriuyXcIX2zln8fxS4e7vE6rXNzxXB9w/POLP3T88PFV4PZ5Rs4FiDetCIa3FfwDmT6LFYVzAxVziqAym2cHSeR8BbVf4RHnIlCvwey9AYwz6vsMw9GiaGk1dl/GyaMQQELyHtYYOJPxmBRhjxDzPpBcHZ6zoxjkv2gkxXH42YJpGaK3L3uy5EGstljynFLwP2F1FjiT4uelQtz3kqLAYB95LckHzBO8khFQE0gSeIKX8AOexEII0dp9AHyLaToH1pKPUlEt0pKk2iTRMUCbCkJDrlitnqCd6bg1O3rZtueI4SiSS490uqHXDo3gSXZEGW0S/FnCzwgxsGce5ZtQuBo56JcQES9GHVNxd4mdjrz8D3x8FkHOEUB6TDpiXUPJx9pAUc65NoH2/AIt+VGEIHlvt5pVDblzy68Ytfgv6HwUd9vb/1GW3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='sem signal adv' title='sem signal adv' src='/blog/static/483561fb59880a35d565ae3f7f2d6f3f/d63a8/sem-signal-adv.png' srcset='/blog/static/483561fb59880a35d565ae3f7f2d6f3f/e7570/sem-signal-adv.png 170w,\n/blog/static/483561fb59880a35d565ae3f7f2d6f3f/f46e7/sem-signal-adv.png 340w,\n/blog/static/483561fb59880a35d565ae3f7f2d6f3f/d63a8/sem-signal-adv.png 568w' sizes='(max-width: 568px) 100vw, 568px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>S의 value가 0보다 작거나 같다면, 누가 대기중이라는 것이므로 하나를 wake up해줌</p>\n<ul>\n<li>= 가 들어가는 이유는 앞에서 S value를 증가시켜줬으므로 결국 초반에는 마이너스였다는 뜻</li>\n</ul>\n</li>\n<li>대기중이 아니라면(S가 0보다 크다면) 그냥 S value 하나 늘려주고 끝</li>\n</ul>\n<blockquote>\n<p>S는 0보다 크거나 같은 정수라 했는데 왜 0보다작은 S를 고려?</p>\n<ul>\n<li>어떤 프로세스가 키를 획득할 때 S value값을 줄임</li>\n<li>S가 음수라면 S의 절대값은 wait을 호출하고 대기중이 P의 수를 의미함</li>\n<li>대기하는 수만큼 마이너스됨</li>\n</ul>\n</blockquote>\n<p>문제 하나 더!</p>\n<p>wait과 signal도 크리티컬 섹션이어야한다</p>\n<blockquote>\n<p>서로 다른 두 함수가 S value, S list를 공유중</p>\n</blockquote>\n<ul>\n<li>S의 value랑 list도 크리티컬하게 관리되어야함 -> 싱글 cpu일 경우, disable interrupt, inable interrupt 사용</li>\n</ul>\n<blockquote>\n<p> 앞에서는 disable interrupt하는거 오버헤드 크다고 했는데 여기선 쓰는 이유 : disable해두는 시간이 짧음</p>\n<p>그러나 멀티 cpu일때는... cpu가 여러개 있으므로 다른 cpu를 사용하는 애들의 인터럽트는 막지 못함. 그렇다고 다른 cpu의 인터럽트까지 막기는 too strong!</p>\n<p>결국 atomic한 하드웨어 서포트를 받아서 해결해야함</p>\n</blockquote>\n<h3>멀티 cpu - 멀티 프로세서에서의 세마포어</h3>\n<ul>\n<li>turn off all other processors : 멀티 cpu일때는 위처럼 다른 cpu의 interrupt도 막는 것은 위험. </li>\n<li>\n<p>atomic hardware support가 필요(test<em>and</em>set) - S와는 별도로 TAS에서 critical section 해결을 위한 boolean 변수 필요 -> 복잡해짐</p>\n<ul>\n<li>생각보다 사용자 레벨에서 쓰기가 어렵...</li>\n</ul>\n</li>\n<li>시그널하고 wait하든 wait두 번 연속으로 하든 잘못된거 모름. 한참 돌다가 나중에 알아챌수도</li>\n<li>데드락, starvation 발생 가능</li>\n<li>즉, 장점도 있지만 사용하긴 어려움</li>\n</ul>","frontmatter":{"title":"os 10-1 Synchronization Tools","date":"May 02, 2022","update":null,"tags":["OS"],"series":null},"fields":{"slug":"/sync-tools/","readingTime":{"minutes":8.655}}},"seriesList":{"edges":[{"node":{"id":"1f4e5238-73be-5807-a94c-f4de69b70d29","fields":{"slug":"/git1/"},"frontmatter":{"title":"git pull 오류 : fatal: refusing to merge unrelated histories"}}},{"node":{"id":"a18a1199-15b8-567b-b381-9877cb7e1482","fields":{"slug":"/flex/"},"frontmatter":{"title":"flex 해보기 ㅎㅎ"}}},{"node":{"id":"dcd66e70-19bb-529a-93eb-a40dcda3967d","fields":{"slug":"/meta-class/"},"frontmatter":{"title":"Django의 Meta 클래스 활용"}}},{"node":{"id":"9ba353f1-cdcf-5911-a0bd-05ab1ab2c88e","fields":{"slug":"/alpha-beta-pruning/"},"frontmatter":{"title":"Minimax 알고리즘 & alpha-beta 가지치기"}}},{"node":{"id":"7f18986d-bd27-5ec2-9316-919595eca11b","fields":{"slug":"/6-2/"},"frontmatter":{"title":"os 6-2"}}},{"node":{"id":"3e388686-2418-5776-a4f4-7d485967ad50","fields":{"slug":"/instance-flex/"},"frontmatter":{"title":"장고하다가 모델 인스턴스 뻥튀기 하고싶을때"}}},{"node":{"id":"3dfd35bf-9f06-57e0-8aae-bbe57bac7616","fields":{"slug":"/grid/"},"frontmatter":{"title":"그리드를 어떻게 그리드라"}}},{"node":{"id":"35cb486b-c0aa-5492-bf01-368334b4e4d5","fields":{"slug":"/datamining/"},"frontmatter":{"title":"작성중"}}},{"node":{"id":"d8cb2c75-c4f1-5607-9036-fdfb429643bd","fields":{"slug":"/7-2/"},"frontmatter":{"title":"os 7-2"}}},{"node":{"id":"5e929406-a010-55f2-8762-1f8c050eaf4c","fields":{"slug":"/7-1/"},"frontmatter":{"title":"os 7-1"}}},{"node":{"id":"58f895f6-cc6d-51eb-b09a-0eade39b1e41","fields":{"slug":"/8-1/"},"frontmatter":{"title":"os 8-1"}}},{"node":{"id":"3b144405-2ae5-5814-a3eb-f3db08d57801","fields":{"slug":"/auth-user/"},"frontmatter":{"title":"AUTH_USER_MODEL 사용"}}},{"node":{"id":"a1a1c386-4e12-55c0-b88e-b1ab29cfc979","fields":{"slug":"/sync-tools/"},"frontmatter":{"title":"os 10-1 Synchronization Tools"}}},{"node":{"id":"a8468bab-91a9-5069-bc3f-049d1a5aceb9","fields":{"slug":"/env/"},"frontmatter":{"title":"SECRET KEY 환경변수에 숨기기"}}},{"node":{"id":"85ca9819-7740-5d19-bde1-f1825944fb23","fields":{"slug":"/11-1/"},"frontmatter":{"title":"os 11-1"}}},{"node":{"id":"fe1864b8-839f-505a-8647-10db01ebd21a","fields":{"slug":"/11-2/"},"frontmatter":{"title":"os 11-2"}}},{"node":{"id":"641a26c1-7a3f-591a-9294-2b8a329ef9a6","fields":{"slug":"/list-comprehension/"},"frontmatter":{"title":"list comprehension"}}},{"node":{"id":"8e10d9c5-ccdf-5fb1-9389-4a7d2618115c","fields":{"slug":"/zip/"},"frontmatter":{"title":"zip"}}},{"node":{"id":"232934ea-695b-59c3-9933-f70434f65675","fields":{"slug":"/access-token/"},"frontmatter":{"title":"git access token 발급 잔디 테스트"}}},{"node":{"id":"4692c2dc-2ae0-58ba-92be-fc345d912b43","fields":{"slug":"/requests/"},"frontmatter":{"title":"python 라이브러리 requests"}}},{"node":{"id":"a49c908d-fe72-5ab8-aeca-835d60f50497","fields":{"slug":"/docker-concept/"},"frontmatter":{"title":"docker 개념"}}},{"node":{"id":"756b4f22-d300-58fe-8d33-fafc6ff511f6","fields":{"slug":"/docker-env/"},"frontmatter":{"title":"docker env설정(작성중ㅎㅎ)"}}},{"node":{"id":"254cabc8-767a-509a-8ac6-1b7c1fee5877","fields":{"slug":"/install-openssl/"},"frontmatter":{"title":"ubuntu에서 openssl 설치하기"}}},{"node":{"id":"7b7a0020-f454-5945-885b-8972512e0d8e","fields":{"slug":"/ssl-concept/"},"frontmatter":{"title":"ssl 인증서란?"}}},{"node":{"id":"d6ccffc2-7b03-5581-b29a-ac306dc06194","fields":{"slug":"/jupyter-setting/"},"frontmatter":{"title":"장고 shell 명령 주피터에서 할 때 초기세팅"}}},{"node":{"id":"9bf2c6c3-9f60-5a55-98d1-e060211c8163","fields":{"slug":"/sync-exam/"},"frontmatter":{"title":"os 10-2 Synchronization Examples"}}},{"node":{"id":"910aa000-d355-501d-a941-b234944b4fec","fields":{"slug":"/bash/"},"frontmatter":{"title":"bash: vi: command not found"}}},{"node":{"id":"4bec6f60-3a0e-5050-b6c4-1a9d7a232ba4","fields":{"slug":"/1/"},"frontmatter":{"title":"os 13-1"}}},{"node":{"id":"02483ae7-ba0a-5e03-aa72-19a907837984","fields":{"slug":"/2/"},"frontmatter":{"title":"os 13-2"}}},{"node":{"id":"ce978a60-290f-5fbb-b75d-f9ec9e6f57e2","fields":{"slug":"/1/"},"frontmatter":{"title":"os 12-1"}}},{"node":{"id":"bfc80393-1cd7-5fc8-bc04-e744783e77de","fields":{"slug":"/2/"},"frontmatter":{"title":"os 12-2"}}},{"node":{"id":"e41df5b8-30c6-54fe-88c9-1d212c70c9f4","fields":{"slug":"/15/"},"frontmatter":{"title":"os 14-2"}}},{"node":{"id":"d86a8175-8ed2-572f-9679-d8d2a48d0697","fields":{"slug":"/2/"},"frontmatter":{"title":"os 14-2"}}},{"node":{"id":"a8eb5fd5-89bd-592a-bbbd-81ff257715b2","fields":{"slug":"/1/"},"frontmatter":{"title":"os 14-1"}}},{"node":{"id":"b2e15c0a-3e85-5d09-bb9a-930a3af8456a","fields":{"slug":"/kr-str/"},"frontmatter":{"title":"[c++] 한글을 한 글자씩 출력하기"}}},{"node":{"id":"ad012487-5365-57df-8a83-b70be15aa316","fields":{"slug":"/arr-addr/"},"frontmatter":{"title":"arr과 &arr의 차이"}}},{"node":{"id":"5063006c-e0ec-58ad-bbd0-0e5f2ab7ad99","fields":{"slug":"/git2/"},"frontmatter":{"title":"git error: cannot lock ref 'refs/remotes/origin/main': unable to resolve reference 'refs/remotes/origin/main': reference broken 문제 해결"}}}]},"previous":{"fields":{"slug":"/rsa-mod/"},"frontmatter":{"title":"10-1"}},"next":{"fields":{"slug":"/deploy-ec2/"},"frontmatter":{"title":"django 프로젝트 ec2로 배포하기"}}},"pageContext":{"id":"a1a1c386-4e12-55c0-b88e-b1ab29cfc979","series":null,"previousPostId":"8a943633-5d6b-5251-89a3-2c7806793dc4","nextPostId":"100231f0-4961-5059-8668-1f8f59ef0da1"}},"staticQueryHashes":[]}