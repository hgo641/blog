{"componentChunkName":"component---src-templates-post-jsx","path":"/requests/","result":{"data":{"site":{"siteMetadata":{"title":"hongo"}},"markdownRemark":{"id":"4692c2dc-2ae0-58ba-92be-fc345d912b43","excerpt":"Python 라이브러리 requests method 4가지에 따라 api 제공 GET : requests.get() POST : requests.post() PUT : requests.put() DELETE : requests.delete() status_code content text json() headers params get 방식으로 HTTP 요청…","html":"<h2>Python 라이브러리 requests</h2>\n<p>method 4가지에 따라 api 제공</p>\n<ul>\n<li>GET : requests.get()</li>\n<li>POST : requests.post()</li>\n<li>PUT : requests.put()</li>\n<li>DELETE : requests.delete()</li>\n</ul>\n<h3>status_code</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">response <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8000\"</span><span class=\"token punctuation\">)</span>\nresponse<span class=\"token punctuation\">.</span>status_code <span class=\"token comment\"># 200, 404 ...</span></code></pre></div>\n<h3>content</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">response<span class=\"token punctuation\">.</span>content\n<span class=\"token comment\"># 바이너리 원문을 가져옴</span></code></pre></div>\n<h3>text</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">response<span class=\"token punctuation\">.</span>text\n<span class=\"token comment\"># UTF-8로 인코딩된 문자열</span></code></pre></div>\n<h3>json()</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">response<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 응답 데이터가 JSON포맷이라면 딕셔너리 객체 반환</span></code></pre></div>\n<h3>headers</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">response<span class=\"token punctuation\">.</span>headers\n<span class=\"token comment\"># {'Date': 'Sat, 16 May 2022 21:10:49 GMT', 'Content-Type': 'application/json; charset=utf-8', ...}</span>\n<span class=\"token comment\"># 헤더 정보를 딕셔너리 객체로 반환</span></code></pre></div>\n<h3>params</h3>\n<ul>\n<li>get 방식으로 HTTP 요청을 할 때는 쿼리 스트링을 통해 응답받을 데이터를 필터링하는 경우가 많다</li>\n<li>params 옵션을 사용하면 쿼리 스트링을 사전의 형태로 넘길 수 있다</li>\n</ul>\n<p># youtube data api 예제</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"key\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"my_secret_key\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'chart'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'mostPopular'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"part\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"statistics\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"regionCode\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"KR\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"maxResults\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nresponse <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span>params<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>url</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"key\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"my_secret_key\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'chart'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'mostPopular'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"part\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"statistics\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"regionCode\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"KR\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"maxResults\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nresponse <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span>params<span class=\"token punctuation\">)</span>\nresponse<span class=\"token punctuation\">.</span>url\n<span class=\"token comment\"># https://www.googleapis.com/youtube/v3/videos?key={my_secret_key}&amp;chart=mostPopular&amp;part=snippet&amp;part=statistics&amp;regionCode=KR&amp;maxResults=10</span></code></pre></div>\n<h3>data</h3>\n<ul>\n<li>post나 put방식으로 HTTP 요청을 할 때는 request body에 데이터를 담아서 보낸다</li>\n<li>data 옵션을 사용하면 <code class=\"language-text\">HTML 양식(form)</code> 포맷의 데이터를 전송할 수 있으며 이 때 <code class=\"language-text\">Content-Type</code> 요청 헤더는 <code class=\"language-text\">application/x-www-form-urlencoded</code>로 자동 설정된다</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://localhost:8000/post\"</span><span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'title1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'hi~'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>json</h3>\n<ul>\n<li>json 옵션을 사용하면 REST API로 <code class=\"language-text\">JSON</code> 포맷의 데이터를 전송할 수 있으며 이때 <code class=\"language-text\">Content-Type</code> 요청 헤더는 <code class=\"language-text\">application/json</code>으로 자동 설정된다</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://localhost:8000/post\"</span><span class=\"token punctuation\">,</span> json<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'title1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'hi~'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>headers</h3>\n<ul>\n<li>headers옵션을 사용해서 요청 헤더도 설정할 수 있다</li>\n<li>인증 토큰을 보낼 때 유용하게 사용된다</li>\n</ul>","frontmatter":{"title":"python 라이브러리 requests","date":"May 16, 2022","update":null,"tags":["python"],"series":null},"fields":{"slug":"/requests/","readingTime":{"minutes":2.07}}},"seriesList":{"edges":[{"node":{"id":"1c0ade67-50d9-566d-8cdf-505bc94e9e30","fields":{"slug":"/1/"},"frontmatter":{"title":"git pull 오류 : fatal: refusing to merge unrelated histories"}}},{"node":{"id":"a18a1199-15b8-567b-b381-9877cb7e1482","fields":{"slug":"/flex/"},"frontmatter":{"title":"flex 해보기 ㅎㅎ"}}},{"node":{"id":"dcd66e70-19bb-529a-93eb-a40dcda3967d","fields":{"slug":"/meta-class/"},"frontmatter":{"title":"Django의 Meta 클래스 활용"}}},{"node":{"id":"9ba353f1-cdcf-5911-a0bd-05ab1ab2c88e","fields":{"slug":"/alpha-beta-pruning/"},"frontmatter":{"title":"Minimax 알고리즘 & alpha-beta 가지치기"}}},{"node":{"id":"7f18986d-bd27-5ec2-9316-919595eca11b","fields":{"slug":"/6-2/"},"frontmatter":{"title":"os 6-2"}}},{"node":{"id":"3dfd35bf-9f06-57e0-8aae-bbe57bac7616","fields":{"slug":"/grid/"},"frontmatter":{"title":"그리드를 어떻게 그리드라"}}},{"node":{"id":"3e388686-2418-5776-a4f4-7d485967ad50","fields":{"slug":"/instance-flex/"},"frontmatter":{"title":"장고하다가 모델 인스턴스 뻥튀기 하고싶을때"}}},{"node":{"id":"35cb486b-c0aa-5492-bf01-368334b4e4d5","fields":{"slug":"/datamining/"},"frontmatter":{"title":"작성중"}}},{"node":{"id":"5e929406-a010-55f2-8762-1f8c050eaf4c","fields":{"slug":"/7-1/"},"frontmatter":{"title":"os 7-1"}}},{"node":{"id":"d8cb2c75-c4f1-5607-9036-fdfb429643bd","fields":{"slug":"/7-2/"},"frontmatter":{"title":"os 7-2"}}},{"node":{"id":"58f895f6-cc6d-51eb-b09a-0eade39b1e41","fields":{"slug":"/8-1/"},"frontmatter":{"title":"os 8-1"}}},{"node":{"id":"3b144405-2ae5-5814-a3eb-f3db08d57801","fields":{"slug":"/auth-user/"},"frontmatter":{"title":"AUTH_USER_MODEL 사용"}}},{"node":{"id":"987ed322-774d-5a43-8f42-1899db096cad","fields":{"slug":"/10-1/"},"frontmatter":{"title":"os 10-1"}}},{"node":{"id":"a8468bab-91a9-5069-bc3f-049d1a5aceb9","fields":{"slug":"/env/"},"frontmatter":{"title":"SECRET KEY 환경변수에 숨기기"}}},{"node":{"id":"7eb19461-ddc3-5b03-ac5a-4fce46553994","fields":{"slug":"/11-1/"},"frontmatter":{"title":"os 11-1"}}},{"node":{"id":"2cebb9b3-24d4-5a97-9261-d7a2757ee845","fields":{"slug":"/11-2/"},"frontmatter":{"title":"os 11-2"}}},{"node":{"id":"641a26c1-7a3f-591a-9294-2b8a329ef9a6","fields":{"slug":"/list-comprehension/"},"frontmatter":{"title":"list comprehension"}}},{"node":{"id":"8e10d9c5-ccdf-5fb1-9389-4a7d2618115c","fields":{"slug":"/zip/"},"frontmatter":{"title":"zip"}}},{"node":{"id":"232934ea-695b-59c3-9933-f70434f65675","fields":{"slug":"/access-token/"},"frontmatter":{"title":"git access token ¹ß±Þ"}}},{"node":{"id":"4692c2dc-2ae0-58ba-92be-fc345d912b43","fields":{"slug":"/requests/"},"frontmatter":{"title":"python 라이브러리 requests"}}},{"node":{"id":"a49c908d-fe72-5ab8-aeca-835d60f50497","fields":{"slug":"/docker-concept/"},"frontmatter":{"title":"docker 개념"}}}]},"previous":{"fields":{"slug":"/access-token/"},"frontmatter":{"title":"git access token ¹ß±Þ"}},"next":{"fields":{"slug":"/viewset-url/"},"frontmatter":{"title":"viewset url 등록"}}},"pageContext":{"id":"4692c2dc-2ae0-58ba-92be-fc345d912b43","series":null,"previousPostId":"232934ea-695b-59c3-9933-f70434f65675","nextPostId":"602f777d-6f5e-5b87-a8b8-3048d40b52cb"}},"staticQueryHashes":[]}