---
title: "djangoì—ì„œ pm2 ì‚¬ìš©í•˜ê¸°"
date: 2022-05-16
update: 2022-05-16
tags:
  - deploy
series: "ì¢…ì„¤"
---





## PM2ëž€?

* ë¬´ì¤‘ë‹¨ ì„œë²„ ì‹¤í–‰
* ë©€í‹°ìŠ¤ë ˆë”©

**Daemon Process Manager**

> ë³´í†µ Node.js ì™€ ê°™ì´ ì‚¬ìš©ë˜ë©° Node.js ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” Process Managerì´ë‹¤
>
> Node.js ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¨ì¼ CPU ì½”ì–´ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— CPUì˜ ë©€í‹°ì½”ì–´ ì‹œìŠ¤í…œì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤
>
> ë•Œë¬¸ì— Node.jsëŠ” í´ëŸ¬ìŠ¤í„° ëª¨ë“ˆì„ í†µí•´ ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë¥¼ ë©€í‹° í”„ë¡œì„¸ìŠ¤ë¡œ ëŠ˜ë¦´ ìˆ˜ ìžˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤
>
> ìœ ì €ëŠ” í´ëŸ¬ìŠ¤í„° ëª¨ë“ˆì„ ì‚¬ìš©í•´ ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤ì—ì„œ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìžˆë‹¤
>
> ì´ë¥¼ ë„ì™€ì£¼ëŠ” ê²ƒì´ PM2ì´ë©° PM2ë¥¼ ì‚¬ìš©í•´ í•˜ì´í¼ ìŠ¤ë ˆë”© ë° ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤ ì œê³µì´ ê°€ëŠ¥í•´ì§„ë‹¤ 

PM2ë¥¼ Django í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•´ë³´ìž!



#### ðŸ”¨ node ì„¤ì¹˜

```idl
$ sudo apt install nodejs
```



#### ðŸ”¨ npm ì„¤ì¹˜

```idl
$ sudo apt install npm
# $ sudo npm install npm@latest -g
```



#### ðŸ”¨ pm2 ì„¤ì¹˜

```idl
$ sudo npm install pm2 -g
```



#### ðŸ”¨ í”„ë¡œì íŠ¸ í•˜ìœ„ì— json íŒŒì¼ ìƒì„± ë° ìž‘ì„±

```idl
$ vim pm2-appname.json
```



\# project/pm2-appname.json

```json
{ "apps": 
 	[
        { "name": "djnago_with_pm2", 
         "script": "manage.py", 
         "args": ["runserver", "0.0.0.0:8000"],
         "exec_mode": "fork", 
         "exec_interpreter" : "python" }
    ] 
}
```

* args ì—ëŠ” django í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•  ë•Œ ì“°ëŠ” ëª…ë ¹ì–´ argsë¥¼ ë„£ëŠ”ë‹¤



#### ðŸ”¨ pm2 start

```idl
$ pm2 start pm2-appname.json
```

* ìž‘ì„±í•œ jsoníŒŒì¼ì„ ì‹¤í–‰

![](./pc2list.png)

> * pm2 stop all : ëª¨ë“  ì„œë²„ ì¤‘ì§€
> * pm2 stop {pid} : í•´ë‹¹ pid ì„œë²„ ì¤‘ì§€

