---
title: "μ¤ν”„λ§ ν…μ¤νΈ μ»¨ν…μ¤νΈ ν”„λ μ„μ›ν¬"
date: 2022-08-08
tags:
  - spring
series: "moviebuddy"
---

## μ¤ν”„λ§ ν…μ¤νΈ μ»¨ν…μ¤νΈ ν”„λ μ„μ›ν¬

> ν…μ¤νΈμ— μ‚¬μ©λλ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μƒμ„± λ° κ΄€λ¦¬ν•κ³  ν…μ¤νΈμ— μ μ©ν•΄μ£Όλ” κΈ°λ¥μ„ κ°€μ§„ ν…μ¤νΈ ν”„λ μ„μ›ν¬

* JUnit λλ” TestNGμ™€ κ°™μ€ μλ°”μ© ν…μ¤νΈ ν”„λ μ„μ›ν¬μ™€ μ ν†µν•©λμ–΄ λ™μ‘ν•λ‹¤.
* μ‹¤ μ΄μν™κ²½κ³Ό μ μ‚¬ν• κµ¬μ„±μΌλ΅ λ™μ‘ν•λ” ν†µν•© ν…μ¤νΈλ¥Ό μ†μ‰½κ² λ§λ“¤ μ μλ‹¤.





## μ¤ν”„λ§ ν…μ¤νΈ μ»¨ν…μ¤νΈ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•΄λ³΄μ!



### π“ μμ΅΄μ„± μ¶”κ°€

`build.gradle`μ— `testImplementation 'org.springframework:spring-test:5.3.9'` μμ΅΄μ„±μ„ μ¶”κ°€ν•λ‹¤.



### π“ μ–΄λ…Έν…μ΄μ… μ¶”κ°€

`MovieFinderTest.java`λ¥Ό μ¤ν”„λ§ ν…μ¤νΈλ΅ λ°”κΏ”λ³΄μ!<br/>

ν΄λμ¤ `MovieFinderTest` μ„μ— μ–΄λ…Έν…μ΄μ… λ‘ κ°λ¥Ό μ¶”κ°€ν•λ‹¤. <br/>

```java
@ExtendWith(SpringExtension.class)
@ContextConfiguration(classes = MovieBuddyFactory.class)
```

![](before.png)

<br/>

* `ExtendWith`λ” JUnitμ΄ ν…μ¤νΈ μ‹¤ν–‰ μ „λµμ„ ν™•μ¥ν•  λ• μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤. 
  * μ•μ— μΈμλ΅ λ“¤μ–΄κ°„ SpringExtensionν΄λμ¤λ” μ¤ν”„λ§ ν…μ¤νΈ μ»¨ν…μ¤νΈ ν”„λ μ„μ›ν¬μ—μ„ μ§€μ›ν•λ” JUnit μ§€μ› ν΄λμ¤λ΅, JUnitμ΄ ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•λ” κ³Όμ •μ—μ„ ν…μ¤νΈκ°€ ν•„μ”λ΅ ν•λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό κµ¬μ„±ν•κ³  κ΄€λ¦¬ν•΄μ¤€λ‹¤.

<br/>

* `ContextConfiguration`μ΄ μ§€μ •λμ–΄μλ‹¤λ©΄, ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ΄ μ§€μ •ν• λΉ κµ¬μ„±μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό λ§λ“ λ‹¤.



> μ‚¬μ‹¤ @SpringJUnitConfig(MovieBuddyFactory.class)λ΅ μ„ λ‘ κ°μ μ–΄λ…Έν…μ΄μ…μ„ λ€μ²΄ν•  μ μλ‹¤.<br/>
>
> * @SpringJUnitConfigμ•μ—μ„ @ExtendWithμ™€ @ContextConfigurationλ¥Ό μ •μν•κ³  μκΈ° λ•λ¬Έ.

### π“ μμ΅΄ κ΄€κ³„ μ£Όμ…

* μ΄μ  μ¤ν”„λ§ ν…μ¤νΈ μ»¨ν…μ¤νΈ ν”„λ μ„μ›ν¬μ— μν•΄μ„ μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈ (=μ¤ν”„λ§ μ»¨ν…μ΄λ„)κ°€ μƒμ„±λ  κ²ƒ μ΄κΈ° λ•λ¬Έμ— μ§μ ‘ μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈλ¥Ό μƒμ„±ν•λ” μ½”λ“λ” μ§€μ΄λ‹¤.
* μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈ μ½”λ“λ¥Ό μ§€μ› κΈ°λ•λ¬Έμ—, μ¤ν”„λ§μ΄ μ κ³µν•λ” μμ΅΄ κ΄€κ³„ μ£Όμ… κΈ°λ¥μ„ ν™μ©ν•΄μ„ ν•„μ”ν• μμ΅΄ κ΄€κ³„λ¥Ό μ·¨λ“ν•λ©΄ λλ‹¤.

* `@Autowired`λ¥Ό μƒμ„±μ λ λ²¨, μ„Έν„° λ λ²¨, ν•„λ“μ—λ„ μ μ©ν•  μ μλ‹¤.





#### 1οΈβƒ£ μƒμ„±μλ¥Ό ν†µν•΄ μμ΅΄ κ΄€κ³„ μ£Όμ…

* μμ΅΄ κ΄€κ³„ μ£Όμ… λ°©λ²• μ¤‘, μƒμ„±μλ¥Ό ν†µν•΄ μ£Όμ… λ°›λ” λ°©μ‹μ„ μ‚¬μ©ν•΄λ³΄μ. (@Autowired)

![](after.png)



#### 2οΈβƒ£ μ„Έν„° λ©”μ†λ“λ¥Ό ν†µν•΄ μμ΅΄ κ΄€κ³„ μ£Όμ…

* movieFinderμ final ν‚¤μ›λ“λ¥Ό μ—†μ• κ³ 

* μƒμ„±μλ¥Ό μ§€μ°κ³  μ•„λ μ„Έν„° λ©”μ†λ“λ¥Ό μƒμ„±ν•λ‹¤.

  ```java
  @Autowired
  void setMovieFinder(MovieFinder movieFinder){
      this.movieFinder = movieFinder;
  }
  ```



#### 3οΈβƒ£ ν•„λ“ λ λ²¨μ—μ„ μμ΅΄ κ΄€κ³„ μ£Όμ…

* μ•μ„ μƒμ„±ν• μ„Έν„° λ©”μ†λ“λ„ μ§€μ°κ³ 
* `@Autowired MovieFinder movieFinder`μ™€ κ°™μ΄ movieFinder ν•„λ“ μ•μ— μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ„ ν•„λ“ λ λ²¨μ—μ„ λ°”λ΅ μμ΅΄ κ΄€κ³„λ¥Ό μ£Όμ…ν• μλ„ μλ‹¤.

> κ·Έλ¬λ‚ ν•„λ“ λ λ²¨μ—μ„ μμ΅΄ κ΄€κ³„λ¥Ό μ£Όμ…ν•λ” κ²ƒμ€ μ§€μ–‘ν•λΌκ³  ν•λ‹¤.<br/>
>
> ν…μ¤νΈλ¥Ό ν•λ”κ² νλ“¤μ–΄μ§„λ‹¤κ³  ν•λ‹¤...

<br/>



## JaxbMovieReaderTestλ„ μ¤ν”„λ§ ν…μ¤νΈλ΅ λ°”κΏ”λ³΄μ

![](jaxbtest.png)

<br/>

* MovieBuddyFactoryλ΅ MovieFinder, CsvMovieReader, JaxbMovieReaderλ¥Ό μƒμ„±ν•  μ μλ‹¤.
* νƒ€μ…μ„ JaxbMovieReaderλ΅ μ •ν•΄μ¤¬μΌλ―€λ΅ μλ™μ™€μ΄μ–΄λ§μ΄ μ μν–‰λλ‹¤.
